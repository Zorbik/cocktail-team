{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/runtime-65cf2bca8a75d423.js","src/js/modal.js","node_modules/@parcel/runtime-js/lib/runtime-914e39ebd3ed9a1d.js","src/js/generateIngridientsList.js","src/js/createModalCoctailMarkup.js","src/favoriteCocktails.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"bSZzr\\\":\\\"favoriteCocktailsPage.a0e3beb2.js\\\",\\\"i0jZs\\\":\\\"symbol-defs.fc3e2d0b.svg\\\",\\\"1wUBz\\\":\\\"favoriteIngredientsPage.1b7a56c1.js\\\"}\"));","import { getCocktailById } from './request-api';\nimport { createModalMarkupCocktail } from './createModalCoctailMarkup';\n// import { isFavorite } from './addFavoriteCocktail';\nimport { onClickIngredient } from './modalEngredient';\nimport { STORAGE_KEY } from './refs';\nimport { getLocalData, checkIdCocktail } from './addFavoriteCocktail';\n\nconst closeModalButton = document.querySelector('.js-modal-coctail-close');\nconst modalCardEl = document.querySelector('#modal');\nconst body = document.querySelector('body');\nconst gallery = document.querySelector('.gallery');\n\nconst overlay = document.getElementById('overlay');\n\ngallery.addEventListener('click', onGalleryClick);\noverlay.addEventListener('click', onOverlayClick);\n// closeModalButton.addEventListener('click', onCloseButtonClick);\n\nasync function onGalleryClick(e) {\n  if (!e.target.dataset.modalTarget) {\n    return;\n  }\n  openModal(modalCardEl);\n\n  const coctail = await getCocktailById(e.target.dataset.id);\n\n  const markup = await createModalMarkupCocktail(coctail);\n\n  modalCardEl.innerHTML = markup;\n\n  modalCardEl.addEventListener('click', onClickModal);\n}\n\nfunction isFavoriteCoctail(e) {\n  const targetEl = e.target.closest('.modal__add-btn');\n\n  if (!targetEl) {\n    return;\n  }\n\n  if (targetEl.classList.contains('btn-added')) {\n    onRemoveFavorite(targetEl);\n  } else {\n    onAddFavorite(targetEl);\n  }\n}\n\nfunction onAddFavorite(elem) {\n  let arrCocktails = getLocalData(STORAGE_KEY);\n  arrCocktails.push(elem.dataset.id);\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(arrCocktails));\n  elem.textContent = 'Remove from favorite';\n  elem.classList.add('btn-added');\n}\n\nfunction onRemoveFavorite(elem) {\n  let arrCocktails = getLocalData(STORAGE_KEY);\n  const index = checkIdCocktail(STORAGE_KEY, elem.dataset.id);\n  if (index >= 0) {\n    arrCocktails.splice(index, 1);\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(arrCocktails));\n  }\n\n  elem.textContent = 'Add to favorite';\n  elem.classList.remove('btn-added');\n}\n\nfunction onClickModal(e) {\n  isFavoriteCoctail(e);\n  onCloseButtonCloseClick(e);\n  onClickIngredient(e);\n}\n\nfunction onCloseButtonCloseClick(e) {\n  // console.log(e.target.closest('.js-modal-coctail-close'));\n  if (e.target.closest('.js-modal-coctail-close')) {\n    closeModal(modalCardEl);\n  }\n}\n\nfunction onOverlayClick() {\n  const modals = document.querySelectorAll('.modal.active');\n  modals.forEach(modalCardEl => {\n    closeModal(modalCardEl);\n  });\n}\n\nfunction openModal() {\n  modalCardEl.classList.add('active');\n  overlay.classList.add('active');\n  body.classList.toggle('modal-opened');\n}\n\nfunction closeModal() {\n  modalCardEl.classList.remove('active');\n  overlay.classList.remove('active');\n  modalCardEl.innerHTML = '';\n  body.classList.toggle('modal-opened');\n  removeEventListener('click', onClickModal);\n}\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"i0jZs\")).toString();","import { getCocktailById } from './request-api';\n\nasync function generateIngredientsList(idCocktail) {\n  const arrCocktail = await getCocktailById(idCocktail);\n  const cocktailObj = arrCocktail;\n  let objIngredients = {};\n\n  for (let i = 1; i <= 15; i += 1) {\n    if (cocktailObj[`strIngredient${i}`]) {\n      objIngredients = {\n        ...objIngredients,\n        [cocktailObj[`strIngredient${i}`]]: cocktailObj[`strMeasure${i}`],\n      };\n    }\n  }\n  return objIngredients;\n}\n\nexport async function renderIngredientsMarkup(id) {\n  const cocktail = await generateIngredientsList(id);\n  const arrIngredients = Object.keys(cocktail);\n  const markup = arrIngredients\n    .map(el => {\n      return `<li class=\"modal__ingredients-item\" data-ingredient=\"${el}\"<span>âœ¶ </span><a data-ingredient=\"${el}\" class=\"modal__ingredient-link\">${\n        cocktail[el] ? cocktail[el] : ''\n      } ${el}</a></li>`;\n    })\n    .join('');\n  return markup;\n}\n","import sprite from '../images/symbol-defs.svg';\nimport { checkIdCocktail } from './addFavoriteCocktail';\nimport { renderIngredientsMarkup } from './generateIngridientsList';\nimport { STORAGE_KEY } from './refs';\n\nexport async function createModalMarkupCocktail(arrCocktails) {\n  // console.log('arrCocktails', arrCocktails);\n  const list = await renderIngredientsMarkup(arrCocktails.idDrink);\n  const { strDrinkThumb, strDrink, idDrink, strInstructions } = arrCocktails;\n\n  return `\n        <button class=\"modal__cocktail-close-button js-modal-coctail-close\" type=\"button\">\n            <svg class=\"close__icon\" width=\"32\" height=\"32\">\n              <use href=\"${sprite}#icon-close-btn\"></use>\n            </svg>\n        </button>\n        <h2 class=\"modal__coctail-name\">${strDrink}</h2>\n        <div class=\"modal__wrapper\">\n        <div class=\"modal__wrapper-instructions\">\n        <p class=\"modal__coctail-instractions\">INSTRUCTIONS:</p>\n        <p class=\"modal__coctail-description\">${strInstructions}</p>\n        </div>\n        <img class=\"modal__coctail-img\" src=\"${strDrinkThumb}\" alt=\"${strDrink}\" />\n        <div class=\"modal__wrapper-ingredients\">\n        <p class=\"modal__coctail-ingredients\">INGREDIENTS</p>\n        <p class=\"modal__p\">Per cocktail</p>\n        <ul class=\"modal__coctail-ingredients-list\">${list}</ul>\n        </div>\n        </div>\n        <button class=\" modal__add-btn coctail ${\n          checkIdCocktail(STORAGE_KEY, idDrink) >= 0 ? 'btn-added' : ''\n        }\" data-id=\"${idDrink}\" type=\"button\">\n            ${\n              checkIdCocktail(STORAGE_KEY, idDrink) >= 0\n                ? 'Remove from favorite'\n                : 'Add to favorite'\n            }\n        </button>\n    `;\n}\n","import './js/modal';\n\nimport './js/header/header-mobile';\nimport './js/header/headerSearchByName';\nimport { renderFavoriteCocktailsMarkup } from './js/createFavoritesPage';\n\nrenderFavoriteCocktailsMarkup();\n"],"names":["parcelRequire","register","JSON","parse","$9kw25","$f673ff76ac11554e$exports","URL","resolve","import","meta","url","toString","async","$4045fc33329df1b3$export$347939b7c8e2307c","id","cocktail","idCocktail","cocktailObj","getCocktailById","objIngredients","i","$4045fc33329df1b3$var$generateIngredientsList","Object","keys","map","el","join","$16e18ddc67511f3b$export$2dd1109f1a5b4003","arrCocktails","list","idDrink","strDrinkThumb","strDrink","strInstructions","$parcel$interopDefault","$6ukBZ","checkIdCocktail","$k2e2J","STORAGE_KEY","document","querySelector","$96f79acd69f10f95$var$modalCardEl","$96f79acd69f10f95$var$body","$96f79acd69f10f95$var$gallery","$96f79acd69f10f95$var$overlay","getElementById","$96f79acd69f10f95$var$isFavoriteCoctail","e","targetEl","target","closest","classList","contains","elem","getLocalData","index","dataset","splice","localStorage","setItem","stringify","textContent","remove","$96f79acd69f10f95$var$onRemoveFavorite","push","add","$96f79acd69f10f95$var$onAddFavorite","$96f79acd69f10f95$var$onClickModal","$96f79acd69f10f95$var$closeModal","$96f79acd69f10f95$var$onCloseButtonCloseClick","$hMXdw","onClickIngredient","innerHTML","toggle","removeEventListener","addEventListener","modalTarget","coctail","markup","querySelectorAll","forEach","modalCardEl","renderFavoriteCocktailsMarkup"],"version":3,"file":"favoriteCocktailsPage.a0e3beb2.js.map"}